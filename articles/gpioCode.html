<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rpigpior">
<title>How to write GPIO Code with rpigpiodr and R • rpigpior</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to write GPIO Code with rpigpiodr and R">
<meta property="og:description" content="rpigpior">
<meta property="og:image" content="https://mnr.github.io/rpigpior/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rpigpior</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/R_and_RPi.html">R_and_RPi</a>
    <a class="dropdown-item" href="../articles/gpioCode.html">How to write GPIO Code with rpigpiodr and R</a>
    <a class="dropdown-item" href="../articles/how-to-RPi.html">How to Setup R on Raspberry Pi</a>
    <a class="dropdown-item" href="../articles/rpi_i2c.html">rpi_i2c</a>
    <a class="dropdown-item" href="../articles/rpi_pwm.html">Raspberry Pi and PWM</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mnr/rpigpior/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>How to write GPIO Code with rpigpiodr and R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mnr/rpigpior/blob/HEAD/vignettes/articles/gpioCode.Rmd" class="external-link"><code>vignettes/articles/gpioCode.Rmd</code></a></small>
      <div class="d-none name"><code>gpioCode.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mnr/rpigpior" class="external-link">rpigpior</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="understanding-gpio">Understanding GPIO<a class="anchor" aria-label="anchor" href="#understanding-gpio"></a>
</h2>
<p><strong>GPIO</strong> stands for <strong>General Purpose
Input/Output</strong>. You can “see” it on the Raspberry Pi; it’s that
dual row of pins along one edge. There are two rows of twenty pins for a
total of forty pins.</p>
<p>GPIO pins can deliver 3.3 volts direct current (DC), 5 volts DC,
ground, or multipurpose input and output pins. Some pins also deliver
specialty functions such as <a href="https://en.wikipedia.org/wiki/I%C2%B2C" class="external-link">I2C</a>, <a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface" class="external-link">SPI</a>,
<a href="https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter" class="external-link">UART</a>,
<a href="https://en.wikipedia.org/wiki/1-Wire" class="external-link">1-wire</a>, or <a href="https://en.wikipedia.org/wiki/Pulse-width_modulation" class="external-link">PWM</a>. If
you don’t pay attention to pin functions before you connect
<em>things</em> to the GPIO, you will zap your Raspberry Pi. That’s a
bad thing.</p>
</div>
<div class="section level2">
<h2 id="gpio-implies-connecting-wires">GPIO implies connecting wires<a class="anchor" aria-label="anchor" href="#gpio-implies-connecting-wires"></a>
</h2>
<p>When you stray into the world of Raspberry Pi, it’s with the intent
to connect sensors and devices to the GPIO pins. This implies circuits
and wires. I can show you what to do, but I assume you have already gone
through some of the excellent tutorials from the <a href="https://raspberrypi.org" class="external-link">Raspberry Pi foundation</a> or other
places such as <a href="https://www.linkedin.com/learning/raspberry-pi-essential-training-14476312/welcome-to-raspberry-pi-essential-training" class="external-link">LinkedIn
Learning</a>.</p>
</div>
<div class="section level2">
<h2 id="reading-a-switch">Reading a switch<a class="anchor" aria-label="anchor" href="#reading-a-switch"></a>
</h2>
<p>Let’s talk about this illustration.</p>
<div class="figure">
<img src="hello_gpio_bb.png" fig-alt="Schematic showing how to connect a pushbutton to Raspberry pi" width="296" alt=""><p class="caption">Connecting a switch to Raspberry Pi</p>
</div>
<div class="section level3">
<h3 id="pins-and-identifiers">Pins and Identifiers<a class="anchor" aria-label="anchor" href="#pins-and-identifiers"></a>
</h3>
<p>At the bottom is a picture of a Raspberry Pi. Along the top are the
two rows of pins that expose the GPIO. There are several ways to <a href="https://pinout.xyz" class="external-link">identify these pins</a>:</p>
<ul>
<li><p>Physical/Board - This is the identification scheme used by
<code>rpigpior</code>. It is the number of the pin on the board. Pin 1
is on the inner (lower) left side. Pin 2 is on the outer (upper) left
side. Pin 40 is on the outer right side. In this diagram, you’ll see it
has a yellow wire connected.</p></li>
<li><p>BCM - This is the signal as found on the Broadcom chip (BCM2835
and others) used to power the GPIO. For example, Board pin 5 (the third
pin from the left on the lower (inside) row) is connected to BCM signal
line 3. You’ll often see this referred to as GPIO03. Yes, this is
confusing, it does make sense when you understand why the designers did
this.</p></li>
<li><p>Wiring Pi - A system written for admirers of Arduino. <a href="http://wiringpi.com" class="external-link">Wiring Pi</a> is popular among the C
programming crowd. I don’t use it for <code>rpigpior</code>.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="schematics">Schematics<a class="anchor" aria-label="anchor" href="#schematics"></a>
</h3>
<p>At the top of the illustration is a white box with a grid of dots.
This is called a <a href="https://www.adafruit.com/product/4539" class="external-link"><em>breadboard</em></a> and
this is exactly what they look like.</p>
<p>At the top and bottom are two horizontal rows (four rows total). All
of the holes in each horizontal row are electrically connected together.
These are called <strong>rails.</strong> If I were to attach five volts
to the top right corner hole, I would read five volts at the top left
corner.</p>
<p>In the middle are two grids separated by a gutter. Each grid is five
rows by thirty columns. All of the holes in each column are connected -
but not across the grid. If I attached five volts to the first column,
first row, I would read five volts in the first column, fifth row.</p>
<p>Breadboards are used with wires, resistors, capacitors, switches,
lights, and microcircuits (such as transistors) to quickly prototype
electrical circuits. In this case, a switch is connected to the
Raspberry Pi with a yellow and red wire.</p>
</div>
<div class="section level3">
<h3 id="connect-a-switch-to-the-raspberry-pi">Connect a switch to the Raspberry Pi<a class="anchor" aria-label="anchor" href="#connect-a-switch-to-the-raspberry-pi"></a>
</h3>
<p>The illustration shows how to connect a pushbutton to the Raspberry
Pi. In this case,</p>
<ul>
<li><p>A red wire connects board pin 17 to one side of the pushbutton.
Board pin 17 supplies 3.3 volts DC.</p></li>
<li><p>A yellow wire connects board pin 40 to the other side of the
pushbutton. Board pin 40 connects to the Broadcom microcircuit and
exposes GPIO21. This allows the Raspberry Pi to read the state of the
pushbutton.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="programming">Programming<a class="anchor" aria-label="anchor" href="#programming"></a>
</h2>
<p>Consider this code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mnr/rpigpior" class="external-link">rpigpior</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/rpi_get.html">rpi_get</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Button pushed"</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Button not pushed"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>On each pass through the <code>while()</code> loop, this program will
read the state of board pin 40 with <code>rpi_get(40)</code>. If the
button is pushed, it will <code>print("Button Pushed")</code>. If pin 40
is not pushed, it will <code>print("Button not pushed")</code></p>
</div>
<div class="section level2">
<h2 id="setting-a-pin">Setting a pin<a class="anchor" aria-label="anchor" href="#setting-a-pin"></a>
</h2>
<p>Now consider this new illustration, which adds to the previous
circuit.</p>
<p><img src="hello_gpio_control_bb.png" fig-alt="schematic to control light bulb with Raspberry Pi" width="296"></p>
<p>There is all sorts of new things happening.</p>
<ul>
<li><p>A red wire connects board pin 17 to the lowest rail. This
supplies 3.3 volts.</p></li>
<li><p>A black wire connects board pin 14 to the next lowest rail. This
supplies ground.</p></li>
</ul>
<p>The wiring for the switch is electrically the same as in the previous
illustration:</p>
<ul>
<li><p>A yellow wire connects one side of the switch to board pin 40
(same as before)</p></li>
<li><p>A red wire connects the 3.3 volt rail to the other side of the
switch.</p></li>
</ul>
<p>An <strong>LED</strong> (Light Emitting Diode) has been added to the
breadboard.</p>
<ul>
<li><p>A black wire connects the top rail (ground) to the cathode of the
LED.</p></li>
<li><p>A 220 ohm resistor is connected to the anode of the LED. This is
then connected via a green wire to board pin 3.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="code-to-blink-an-led">Code to blink an LED<a class="anchor" aria-label="anchor" href="#code-to-blink-an-led"></a>
</h2>
<p>Given the above circuit, this code will then blink the LED</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mnr/rpigpior" class="external-link">rpigpior</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/rpi_get.html">rpi_get</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>    <span class="fu"><a href="../reference/rpi_set.html">rpi_set</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="fu"><a href="../reference/rpi_set.html">rpi_set</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">0</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Notice the addition of <code>rpi_set(3,1)</code>. This tells the
Raspberry Pi to turn board pin 3 <strong>on</strong>.
<code>rpi_set(3,0)</code> tells the Raspberry Pi to turn board pin 3
<strong>off</strong>.</p>
<p>The loop reads the state of the switch <code>rpi_get(40)</code>. If
the button is pushed, the LED attached to pin 3 will blink; 1 second on,
3 seconds off.</p>
</div>
<div class="section level2">
<h2 id="hello-world">hello world<a class="anchor" aria-label="anchor" href="#hello-world"></a>
</h2>
<p>There you have it, the Raspberry Pi equivalent of a <strong>hello
world</strong> program. You’ve just learned:</p>
<ul>
<li><p>How to wire a simple Raspberry Pi circuit with a switch and an
LED.</p></li>
<li><p>How to use the R programming language to control the LED based on
the Raspberry Pi</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mark Niemann-Ross.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
